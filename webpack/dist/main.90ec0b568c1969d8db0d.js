!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);class r{constructor(e,t,n){return this.state={name:"",quantity:0,measure:"",id:21.6*Math.random()*Math.random()*23.4},this.setName(e),this.setQuantity(t),this.setMeasure(n),this.state}setName(e){this.state.name=e}setMeasure(e){this.state.measure=e}setQuantity(e){this.state.quantity=e}}function i(e,t,n,r,i,a){const o=document.createElement("div");for(let c=0;c<2;c++){const d=document.createElement("label"),l=document.createElement("input");l.setAttribute("name",i),0===c?(d.innerHTML=e,l.setAttribute("type",n),a&&(l.value=e)):(d.innerHTML=t,l.setAttribute("type",r),a&&(l.value=t)),o.appendChild(d),o.appendChild(l)}return o}function a(e,t){[...t].forEach(e=>{t.remove(e)}),e.forEach(e=>{const{category:n}=e;t.add(new Option(n,n))})}function o(e){localStorage.setItem("list",JSON.stringify(e))}function c(e,t,n){const r=document.createElement("button"),i=document.createElement("button"),c=document.createElement("li"),u=document.createElement("input"),s=document.createElement("p"),m=document.createElement("p"),p=document.createElement("input"),h=document.createElement("select"),f=document.getElementsByClassName(""+e)[0];p.value=t.name,u.value=t.quantity,p.disabled=!0,u.disabled=!0,m.innerHTML="Nazwa produktu:",s.innerHTML="Ilość w "+t.measure+":",r.innerHTML="Edytuj",i.innerHTML="Usuń",i.onclick=r=>{f.removeChild(c),v(e,t.id,n),o(n)},r.onclick=r=>{a(n,h),l(e,t,h,n,p,u),d(f,r.target,h)};[m,p,s,u,r,i].forEach(e=>c.appendChild(e)),f.appendChild(c)}const d=(e,t,n)=>{[...e.parentNode.children].forEach(e=>{[...e.children].forEach(e=>{t.parentNode!==e?"true"===e.getAttribute("open")&&u(!0,"Edytuj",!1,e.querySelector("select"),e):!0===e.children[1].disabled?u(!1,"Zapisz",!0,n,e):u(!0,"Edytuj",!1,n,e)})})},l=(e,t,n,i,a,o)=>{const d=n.getAttribute("category"),l=()=>!RegExp(/^\d+$/).test(o.value)&&(a.value=t.name,o.value=t.quantity,alert("Ilość musi być numerem"),!0);if(d===e||"null"===JSON.stringify(d)){if(l())return;b(e,t,[o.value,a.value],i,!0)}else{if(l())return;v(e,t.id,i),b(d,t,[o.value,a.value],i,!1),c(d,new r(a.value,o.value,t.measure),i),document.querySelector("."+e).removeChild(n.parentNode)}},u=(e,t,n,r,i)=>{const a=i.children[1],o=i.children[3],c=i.children[4];a.disabled=e,o.disabled=e,c.innerHTML=t;const d=e=>{e.target.setAttribute("category",e.target.value)};n?(i.setAttribute("open","true"),i.appendChild(r),r.setAttribute("category",r.value),r.addEventListener("change",e=>d(e))):(i.removeAttribute("open","true"),r.removeEventListener("change",e=>d(e)),r.removeAttribute("category"),i.removeChild(r))},s=document.querySelector("body"),m=document.createElement("select"),p=document.createElement("section"),h=document.createElement("button"),f=document.createElement("button");function y(e){s.appendChild(p),p.appendChild(i("kg","szt","radio","radio","measure",!0)),p.appendChild(i("Nazwa","Ilość","text","number","",!1)),h.innerHTML="Zapisz",f.innerHTML="Dodaj produkt",s.appendChild(f),p.appendChild(m),p.appendChild(h),p.classList.add("adding_container"),f.classList.add("add_item_button"),f.addEventListener("click",()=>a(e,m)),h.addEventListener("click",()=>function(e){const t=p.children,n=[...t[0].children].find(e=>!0===e.checked),i=t[1].children[3],a=t[1].children[1],d=()=>{[a,i,m].forEach(e=>{""===e.value?e.style.border="red 1px solid":e.style.border=""})};if(""===i.value||""===a.value||""===m.value)return void d();if(void 0===n)d(),alert("Nie wybrałeś miary");else{d();const t=e.findIndex(e=>e.category===m.value),l=e[t];e[t]={...l,items:[...l.items,new r(a.value,i.value,n.value)]},c(m.value,e[t].items[e[t].items.length-1],e),o(e)}}(e))}function v(e,t,n){const r=n.findIndex(t=>t.category===e);n[r]={...n[r],items:n[r].items.filter(e=>e.id!==t)}}function b(e,t,n,r,i){const a=r.findIndex(t=>t.category===e),c=r[a].items.findIndex(e=>e.id===t.id);i?r[a].items[c]={...r[a].items[c],name:n[1],quantity:n[0]}:r[a].items.push({name:n[1],quantity:n[0],measure:t.measure,id:21.6*Math.random()*Math.random()*23.4}),o(r)}function g(e,t){const n=document.querySelector(".list_container"),r=document.createElement("button"),i=document.createElement("ul"),a=document.createElement("span"),c=document.createElement("h3");c.innerHTML=e,r.innerHTML="Usuń",r.addEventListener("click",r=>{n.removeChild(document.querySelector("."+e)),function(e,t){console.log(e,t);const n=t.find(t=>t.category===e);let r=t.indexOf(n);t.splice(r,1)}(e,t),o(t)}),a.appendChild(c),a.appendChild(r),i.appendChild(a),i.classList.add(e),n.appendChild(i)}const E=document.querySelector("body"),L=document.createElement("section");function C(e){const t=document.createElement("input"),n=document.createElement("button");n.innerHTML="Dodaj kategorię",[t,n].forEach(e=>L.appendChild(e)),E.appendChild(L),n.addEventListener("click",()=>function(e,t){if(void 0!==e.find(e=>e.category===t)||""===t)return;e.push({category:t,items:[]}),g(t,e),o(e)}(e,t.value))}L.classList.add("add_category_field");n(0);new class{constructor(){this.list=null!==localStorage.getItem("list")&&void 0!==localStorage.getItem("list")?JSON.parse(localStorage.getItem("list")):[],y(this.list),C(this.list);const e=document.createElement("section");e.classList.add("list_container"),document.querySelector("body").appendChild(e),this.createList()}createList(){this.list.forEach(e=>{g(e.category,this.list),e.items.forEach(t=>c(e.category,t,this.list))})}}}]);